"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const jackwebutil_1 = require("jackwebutil");
const FoodDao_1 = require("./DB/Dao/Food/FoodDao");
const MenuDao_1 = require("./DB/Dao/Menu/MenuDao");
const HomeMenuCao_1 = require("./Service/Home/Repository/HomeMenuCao");
const AdminService_1 = require("./Service/Admin/AdminService");
const HomeLoadMenuService_1 = require("./Service/Home/Service/HomeLoadMenuService");
const HomeService_1 = require("./Service/Home/Service/HomeService");
const PathHelper_1 = require("./Util/PathHelper");
const AdminAddMenuService_1 = require("./Service/Admin/AdminAddMenuService");
class App {
    static main() {
        // ==== CTOR ====
        // CTOR HTTP
        let http = new jackwebutil_1.HttpServer();
        // CTOR DAO
        let menuDao = new MenuDao_1.MenuDao();
        let foodDao = new FoodDao_1.FoodDao();
        // CTOR CAO
        let homeMenuCao = new HomeMenuCao_1.HomeMenuCao();
        // CTOR HOME SERVICE
        let homeService = new HomeService_1.HomeService();
        let homeLoadMenuService = new HomeLoadMenuService_1.HomeLoadMenuService();
        // CTOR ADMIN SERVICE
        let adminService = new AdminService_1.AdminService();
        let adminAddMenuService = new AdminAddMenuService_1.AdminAddMenuService();
        // ==== INJECT ====
        // INJECT HOME SERVICE
        homeService.Inject(http);
        homeLoadMenuService.Inject(foodDao, menuDao, homeMenuCao, http);
        // INJECT ADMIN SERVICE
        adminService.Inject(http);
        adminAddMenuService.Inject(menuDao, foodDao, http);
        // ==== INIT ====
        // INIT HTTP
        const viewPath = "/view/";
        http.InitHttpView(9966, PathHelper_1.PathHelper.GetRootDir(), viewPath, viewPath);
        // INIT DAO
        menuDao.Init();
        foodDao.Init();
        // INIT HOME SERVICE
        homeService.Init();
        homeLoadMenuService.Init();
        // INIT ADMIN SERVICE
        adminService.Init();
        adminAddMenuService.Init();
        // ==== RUN ====
        http.Start();
    }
}
App.main();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXBwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL0FwcC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDZDQUF5QztBQUN6QyxtREFBZ0Q7QUFDaEQsbURBQWdEO0FBQ2hELHVFQUFvRTtBQUNwRSwrREFBNEQ7QUFDNUQsb0ZBQWlGO0FBQ2pGLG9FQUFpRTtBQUNqRSxrREFBK0M7QUFDL0MsNkVBQTBFO0FBRTFFLE1BQU0sR0FBRztJQUVMLE1BQU0sQ0FBQyxJQUFJO1FBRVAsaUJBQWlCO1FBQ2pCLFlBQVk7UUFDWixJQUFJLElBQUksR0FBZSxJQUFJLHdCQUFVLEVBQUUsQ0FBQztRQUV4QyxXQUFXO1FBQ1gsSUFBSSxPQUFPLEdBQVksSUFBSSxpQkFBTyxFQUFFLENBQUM7UUFDckMsSUFBSSxPQUFPLEdBQVksSUFBSSxpQkFBTyxFQUFFLENBQUM7UUFFckMsV0FBVztRQUNYLElBQUksV0FBVyxHQUFnQixJQUFJLHlCQUFXLEVBQUUsQ0FBQztRQUVqRCxvQkFBb0I7UUFDcEIsSUFBSSxXQUFXLEdBQWdCLElBQUkseUJBQVcsRUFBRSxDQUFDO1FBQ2pELElBQUksbUJBQW1CLEdBQXdCLElBQUkseUNBQW1CLEVBQUUsQ0FBQztRQUV6RSxxQkFBcUI7UUFDckIsSUFBSSxZQUFZLEdBQWlCLElBQUksMkJBQVksRUFBRSxDQUFDO1FBQ3BELElBQUksbUJBQW1CLEdBQXdCLElBQUkseUNBQW1CLEVBQUUsQ0FBQztRQUV6RSxtQkFBbUI7UUFDbkIsc0JBQXNCO1FBQ3RCLFdBQVcsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDekIsbUJBQW1CLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxPQUFPLEVBQUUsV0FBVyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBRWhFLHVCQUF1QjtRQUN2QixZQUFZLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzFCLG1CQUFtQixDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBRW5ELGlCQUFpQjtRQUNqQixZQUFZO1FBQ1osTUFBTSxRQUFRLEdBQVcsUUFBUSxDQUFDO1FBQ2xDLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUFFLHVCQUFVLENBQUMsVUFBVSxFQUFFLEVBQUUsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBRXJFLFdBQVc7UUFDWCxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDZixPQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7UUFFZixvQkFBb0I7UUFDcEIsV0FBVyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ25CLG1CQUFtQixDQUFDLElBQUksRUFBRSxDQUFDO1FBRTNCLHFCQUFxQjtRQUNyQixZQUFZLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDcEIsbUJBQW1CLENBQUMsSUFBSSxFQUFFLENBQUM7UUFFM0IsZ0JBQWdCO1FBQ2hCLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUVqQixDQUFDO0NBRUo7QUFFRCxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBIdHRwU2VydmVyIH0gZnJvbSBcImphY2t3ZWJ1dGlsXCI7XHJcbmltcG9ydCB7IEZvb2REYW8gfSBmcm9tIFwiLi9EQi9EYW8vRm9vZC9Gb29kRGFvXCI7XHJcbmltcG9ydCB7IE1lbnVEYW8gfSBmcm9tIFwiLi9EQi9EYW8vTWVudS9NZW51RGFvXCI7XHJcbmltcG9ydCB7IEhvbWVNZW51Q2FvIH0gZnJvbSBcIi4vU2VydmljZS9Ib21lL1JlcG9zaXRvcnkvSG9tZU1lbnVDYW9cIjtcclxuaW1wb3J0IHsgQWRtaW5TZXJ2aWNlIH0gZnJvbSBcIi4vU2VydmljZS9BZG1pbi9BZG1pblNlcnZpY2VcIjtcclxuaW1wb3J0IHsgSG9tZUxvYWRNZW51U2VydmljZSB9IGZyb20gXCIuL1NlcnZpY2UvSG9tZS9TZXJ2aWNlL0hvbWVMb2FkTWVudVNlcnZpY2VcIjtcclxuaW1wb3J0IHsgSG9tZVNlcnZpY2UgfSBmcm9tIFwiLi9TZXJ2aWNlL0hvbWUvU2VydmljZS9Ib21lU2VydmljZVwiO1xyXG5pbXBvcnQgeyBQYXRoSGVscGVyIH0gZnJvbSBcIi4vVXRpbC9QYXRoSGVscGVyXCI7XHJcbmltcG9ydCB7IEFkbWluQWRkTWVudVNlcnZpY2UgfSBmcm9tIFwiLi9TZXJ2aWNlL0FkbWluL0FkbWluQWRkTWVudVNlcnZpY2VcIjtcclxuXHJcbmNsYXNzIEFwcCB7XHJcblxyXG4gICAgc3RhdGljIG1haW4oKSB7XHJcblxyXG4gICAgICAgIC8vID09PT0gQ1RPUiA9PT09XHJcbiAgICAgICAgLy8gQ1RPUiBIVFRQXHJcbiAgICAgICAgbGV0IGh0dHA6IEh0dHBTZXJ2ZXIgPSBuZXcgSHR0cFNlcnZlcigpO1xyXG5cclxuICAgICAgICAvLyBDVE9SIERBT1xyXG4gICAgICAgIGxldCBtZW51RGFvOiBNZW51RGFvID0gbmV3IE1lbnVEYW8oKTtcclxuICAgICAgICBsZXQgZm9vZERhbzogRm9vZERhbyA9IG5ldyBGb29kRGFvKCk7XHJcblxyXG4gICAgICAgIC8vIENUT1IgQ0FPXHJcbiAgICAgICAgbGV0IGhvbWVNZW51Q2FvOiBIb21lTWVudUNhbyA9IG5ldyBIb21lTWVudUNhbygpO1xyXG5cclxuICAgICAgICAvLyBDVE9SIEhPTUUgU0VSVklDRVxyXG4gICAgICAgIGxldCBob21lU2VydmljZTogSG9tZVNlcnZpY2UgPSBuZXcgSG9tZVNlcnZpY2UoKTtcclxuICAgICAgICBsZXQgaG9tZUxvYWRNZW51U2VydmljZTogSG9tZUxvYWRNZW51U2VydmljZSA9IG5ldyBIb21lTG9hZE1lbnVTZXJ2aWNlKCk7XHJcblxyXG4gICAgICAgIC8vIENUT1IgQURNSU4gU0VSVklDRVxyXG4gICAgICAgIGxldCBhZG1pblNlcnZpY2U6IEFkbWluU2VydmljZSA9IG5ldyBBZG1pblNlcnZpY2UoKTtcclxuICAgICAgICBsZXQgYWRtaW5BZGRNZW51U2VydmljZTogQWRtaW5BZGRNZW51U2VydmljZSA9IG5ldyBBZG1pbkFkZE1lbnVTZXJ2aWNlKCk7XHJcblxyXG4gICAgICAgIC8vID09PT0gSU5KRUNUID09PT1cclxuICAgICAgICAvLyBJTkpFQ1QgSE9NRSBTRVJWSUNFXHJcbiAgICAgICAgaG9tZVNlcnZpY2UuSW5qZWN0KGh0dHApO1xyXG4gICAgICAgIGhvbWVMb2FkTWVudVNlcnZpY2UuSW5qZWN0KGZvb2REYW8sIG1lbnVEYW8sIGhvbWVNZW51Q2FvLCBodHRwKTtcclxuXHJcbiAgICAgICAgLy8gSU5KRUNUIEFETUlOIFNFUlZJQ0VcclxuICAgICAgICBhZG1pblNlcnZpY2UuSW5qZWN0KGh0dHApO1xyXG4gICAgICAgIGFkbWluQWRkTWVudVNlcnZpY2UuSW5qZWN0KG1lbnVEYW8sIGZvb2REYW8sIGh0dHApO1xyXG5cclxuICAgICAgICAvLyA9PT09IElOSVQgPT09PVxyXG4gICAgICAgIC8vIElOSVQgSFRUUFxyXG4gICAgICAgIGNvbnN0IHZpZXdQYXRoOiBzdHJpbmcgPSBcIi92aWV3L1wiO1xyXG4gICAgICAgIGh0dHAuSW5pdEh0dHBWaWV3KDk5NjYsIFBhdGhIZWxwZXIuR2V0Um9vdERpcigpLCB2aWV3UGF0aCwgdmlld1BhdGgpO1xyXG5cclxuICAgICAgICAvLyBJTklUIERBT1xyXG4gICAgICAgIG1lbnVEYW8uSW5pdCgpO1xyXG4gICAgICAgIGZvb2REYW8uSW5pdCgpO1xyXG5cclxuICAgICAgICAvLyBJTklUIEhPTUUgU0VSVklDRVxyXG4gICAgICAgIGhvbWVTZXJ2aWNlLkluaXQoKTtcclxuICAgICAgICBob21lTG9hZE1lbnVTZXJ2aWNlLkluaXQoKTtcclxuXHJcbiAgICAgICAgLy8gSU5JVCBBRE1JTiBTRVJWSUNFXHJcbiAgICAgICAgYWRtaW5TZXJ2aWNlLkluaXQoKTtcclxuICAgICAgICBhZG1pbkFkZE1lbnVTZXJ2aWNlLkluaXQoKTtcclxuXHJcbiAgICAgICAgLy8gPT09PSBSVU4gPT09PVxyXG4gICAgICAgIGh0dHAuU3RhcnQoKTtcclxuICAgIFxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuQXBwLm1haW4oKTsiXX0=