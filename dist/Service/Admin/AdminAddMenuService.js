"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AdminAddMenuService = void 0;
const MenuTable_1 = require("../../DB/Table/MenuTable");
class AdminAddMenuService {
    constructor() { }
    Inject(menuDao, foodDao, http) {
        this.menuDao = menuDao;
        this.foodDao = foodDao;
        this.http = http;
    }
    Init() {
        this.http.PostListen("/AddMenu", (req, res) => {
            let foodIdArr = [];
            let newMenu = req.body.data;
            for (let i = 0; i < newMenu.foodArr.length; i += 1) {
                let foodName = newMenu.foodArr[i];
                let id = this.foodDao.AddFoodWithName(foodName);
                foodIdArr.push(id);
            }
            let menu = new MenuTable_1.MenuTable();
            menu.yyyymmdd = newMenu.date;
            menu.foodIdArr = foodIdArr;
            this.menuDao.AddMenu(menu);
        });
    }
}
exports.AdminAddMenuService = AdminAddMenuService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQWRtaW5BZGRNZW51U2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9TZXJ2aWNlL0FkbWluL0FkbWluQWRkTWVudVNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBR0Esd0RBQXFEO0FBRXJELE1BQWEsbUJBQW1CO0lBTTVCLGdCQUFnQixDQUFDO0lBRWpCLE1BQU0sQ0FBQyxPQUFnQixFQUFFLE9BQWdCLEVBQUUsSUFBZ0I7UUFDdkQsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7UUFDdkIsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7UUFDdkIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7SUFDckIsQ0FBQztJQUVELElBQUk7UUFPQSxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEVBQUU7WUFFMUMsSUFBSSxTQUFTLEdBQWEsRUFBRSxDQUFDO1lBRTdCLElBQUksT0FBTyxHQUFZLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO1lBQ3JDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFO2dCQUNoRCxJQUFJLFFBQVEsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNsQyxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGVBQWUsQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFDaEQsU0FBUyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQzthQUN0QjtZQUVELElBQUksSUFBSSxHQUFjLElBQUkscUJBQVMsRUFBRSxDQUFDO1lBQ3RDLElBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQztZQUM3QixJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztZQUMzQixJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUUvQixDQUFDLENBQUMsQ0FBQztJQUVQLENBQUM7Q0FFSjtBQXpDRCxrREF5Q0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBIdHRwU2VydmVyIH0gZnJvbSBcImphY2t3ZWJ1dGlsXCI7XHJcbmltcG9ydCB7IEZvb2REYW8gfSBmcm9tIFwiLi4vLi4vREIvRGFvL0Zvb2QvRm9vZERhb1wiO1xyXG5pbXBvcnQgeyBNZW51RGFvIH0gZnJvbSBcIi4uLy4uL0RCL0Rhby9NZW51L01lbnVEYW9cIjtcclxuaW1wb3J0IHsgTWVudVRhYmxlIH0gZnJvbSBcIi4uLy4uL0RCL1RhYmxlL01lbnVUYWJsZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFkbWluQWRkTWVudVNlcnZpY2Uge1xyXG5cclxuICAgIG1lbnVEYW86IE1lbnVEYW87XHJcbiAgICBmb29kRGFvOiBGb29kRGFvO1xyXG4gICAgaHR0cDogSHR0cFNlcnZlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxyXG5cclxuICAgIEluamVjdChtZW51RGFvOiBNZW51RGFvLCBmb29kRGFvOiBGb29kRGFvLCBodHRwOiBIdHRwU2VydmVyKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5tZW51RGFvID0gbWVudURhbztcclxuICAgICAgICB0aGlzLmZvb2REYW8gPSBmb29kRGFvO1xyXG4gICAgICAgIHRoaXMuaHR0cCA9IGh0dHA7XHJcbiAgICB9XHJcblxyXG4gICAgSW5pdCgpIHtcclxuXHJcbiAgICAgICAgdHlwZSBOZXdNZW51ID0ge1xyXG4gICAgICAgICAgICBkYXRlOiBzdHJpbmcsXHJcbiAgICAgICAgICAgIGZvb2RBcnI6IHN0cmluZ1tdXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmh0dHAuUG9zdExpc3RlbihcIi9BZGRNZW51XCIsIChyZXEsIHJlcykgPT4ge1xyXG5cclxuICAgICAgICAgICAgbGV0IGZvb2RJZEFycjogbnVtYmVyW10gPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGxldCBuZXdNZW51OiBOZXdNZW51ID0gcmVxLmJvZHkuZGF0YTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdNZW51LmZvb2RBcnIubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgICAgIGxldCBmb29kTmFtZSA9IG5ld01lbnUuZm9vZEFycltpXTtcclxuICAgICAgICAgICAgICAgIGxldCBpZCA9IHRoaXMuZm9vZERhby5BZGRGb29kV2l0aE5hbWUoZm9vZE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgZm9vZElkQXJyLnB1c2goaWQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgbWVudTogTWVudVRhYmxlID0gbmV3IE1lbnVUYWJsZSgpO1xyXG4gICAgICAgICAgICBtZW51Lnl5eXltbWRkID0gbmV3TWVudS5kYXRlO1xyXG4gICAgICAgICAgICBtZW51LmZvb2RJZEFyciA9IGZvb2RJZEFycjtcclxuICAgICAgICAgICAgdGhpcy5tZW51RGFvLkFkZE1lbnUobWVudSk7XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbn0iXX0=